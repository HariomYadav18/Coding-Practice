class Solution {
  public:
    int maxProfit(vector<int> &prices) {
        // code here
        int n = prices.size();
        
        if(n == 0) return 0;
        
        vector<vector<int>> curr(3, vector<int>(2,0));
        vector<vector<int>> next(3, vector<int>(2,0));
        
        for(int i = n - 1 ; i >= 0 ; i--){
            for(int k = 1 ; k <=2 ; k++){
                
                curr[k][1] = max(-prices[i] + next[k][0] , next[k][1]);
                
                curr[k][0] = max(prices[i] + next[k-1][1], next[k][0]);
                
                
            }
            
            next = curr;
        }
        
        return next[2][1];
    }
};
